---
import Base from '../layouts/Base.astro';

const gh = 'https://github.com/stevegula';

const templates = [
  { repo: 'gs-book-list', name: 'Book List', desc: 'Track books with author, genre, rating, and reading status.' },
  { repo: 'gs-daily-exercise', name: 'Daily Exercise', desc: 'Log workouts with sets, reps, weight, duration, and intensity.' },
  { repo: 'gs-expense-tracker', name: 'Expense Tracker', desc: 'Track expenses with amount, category, vendor, and reimbursement status.' },
  { repo: 'gs-food-log', name: 'Food Log', desc: 'Record meals with calories, meal type, and macros.' },
  { repo: 'gs-habit-tracker', name: 'Habit Tracker', desc: 'Build habits with streak tracking, frequency, and recurrence.' },
  { repo: 'gs-home-maintenance', name: 'Home Maintenance', desc: 'Schedule household tasks by area, frequency, and cost.' },
  { repo: 'gs-invoice-tracker', name: 'Invoice Tracker', desc: 'Manage invoices with client, amount, status, and due dates.' },
  { repo: 'gs-job-applications', name: 'Job Applications', desc: 'Track applications through the hiring pipeline with status and follow-ups.' },
  { repo: 'gs-medication-tracker', name: 'Medication Tracker', desc: 'Track medications with dosage, time of day, and recurrence.' },
  { repo: 'gs-meeting-log', name: 'Meeting Log', desc: 'Record meetings with attendees, action items, and follow-ups.' },
  { repo: 'gs-movie-watchlist', name: 'Movie Watchlist', desc: 'Track movies and TV shows by platform, genre, and watch status.' },
  { repo: 'gs-plant-care', name: 'Plant Care', desc: 'Schedule watering and care for plants by location and season.' },
  { repo: 'gs-recipe-collection', name: 'Recipe Collection', desc: 'Organize recipes with cuisine, prep time, difficulty, and servings.' },
  { repo: 'gs-sleep-log', name: 'Sleep Log', desc: 'Track sleep duration, quality, bedtime, and wake time.' },
  { repo: 'gs-water-intake', name: 'Water Intake', desc: 'Monitor daily water consumption by amount and time.' },
  { repo: 'gs-wine-journal', name: 'Wine Journal', desc: 'Catalog wines with varietal, region, vintage, and tasting notes.' },
  { repo: 'gs-work-mileage', name: 'Work Mileage', desc: 'Log business mileage with origin, destination, and purpose.' },
];

const schemaExample = `{
  "projectType": "custom",
  "schema": {
    "primaryField": "description",
    "fields": [
      {
        "key": "description",
        "label": "Description",
        "type": "string",
        "required": true
      },
      {
        "key": "amount",
        "label": "Amount ($)",
        "type": "number",
        "required": true,
        "listDisplay": true
      },
      {
        "key": "category",
        "label": "Category",
        "type": "enum",
        "options": ["Travel", "Meals", "Supplies", "Software", "Other"],
        "required": true,
        "listDisplay": true,
        "sortable": true
      },
      {
        "key": "date",
        "label": "Date",
        "type": "date",
        "required": true,
        "sortable": true
      },
      {
        "key": "reimbursed",
        "label": "Reimbursed",
        "type": "checked"
      },
      {
        "key": "notes",
        "label": "Notes",
        "type": "text"
      }
    ]
  }
}`;
---

<Base title="BYOL — Custom List Types — GitSorted" description="Bring Your Own List: define custom schemas for GitSorted with any combination of field types, or clone a ready-made template.">
  <div class="max-w-3xl mx-auto px-6 py-16">
    <h1 class="text-3xl font-bold text-white mb-3">BYOL &mdash; Bring Your Own List</h1>
    <p class="text-gray-400 mb-12">
      GitSorted ships with task lists, shopping lists, and notes. But you can also define your own list type with a custom schema. We call this <strong class="text-white">BYOL</strong>. Fork a template repo, point GitSorted at it, and you have a fully custom list with your own fields, types, and sort options.
      <span class="inline-block mt-3 text-sm text-yellow-400/80">BYOL is currently in beta. The schema format may evolve as we add new field types and capabilities.</span>
    </p>

    <div class="space-y-16 text-gray-300">

      <!-- How it works -->
      <section>
        <h2 class="text-xl font-semibold text-white mb-4">How it works</h2>
        <ol class="list-decimal list-inside space-y-3 text-gray-400">
          <li><strong class="text-gray-300">Create a git repo</strong> with a <code class="text-gray-300">metadata.json</code> at the root. Set <code class="text-gray-300">projectType</code> to <code class="text-gray-300">"custom"</code> and define a <code class="text-gray-300">schema</code> with your fields.</li>
          <li><strong class="text-gray-300">Push it to a remote</strong> &mdash; GitHub, GitLab, Bitbucket, or any git server.</li>
          <li><strong class="text-gray-300">Clone it in GitSorted</strong> &mdash; add your repo URL and credential. GitSorted reads the schema and builds the UI automatically.</li>
          <li><strong class="text-gray-300">Start adding items.</strong> Each item is a JSON file in the <code class="text-gray-300">items/</code> directory with your custom fields stored in a <code class="text-gray-300">data</code> object.</li>
        </ol>
      </section>

      <!-- Field types -->
      <section>
        <h2 class="text-xl font-semibold text-white mb-4">Supported field types</h2>
        <div class="overflow-x-auto">
          <table class="w-full text-sm border border-gray-800 rounded-lg">
            <thead>
              <tr class="bg-gray-900 text-left text-gray-400">
                <th class="px-4 py-2 border-b border-gray-800">Type</th>
                <th class="px-4 py-2 border-b border-gray-800">Input</th>
                <th class="px-4 py-2 border-b border-gray-800">Description</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-800/50">
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">string</td>
                <td class="px-4 py-2 text-gray-400">Text input</td>
                <td class="px-4 py-2 text-gray-400">Single-line text. Typically used for names and titles.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">text</td>
                <td class="px-4 py-2 text-gray-400">Multiline input</td>
                <td class="px-4 py-2 text-gray-400">Long-form text for notes, descriptions, or comments.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">number</td>
                <td class="px-4 py-2 text-gray-400">Numeric input</td>
                <td class="px-4 py-2 text-gray-400">Numeric values &mdash; amounts, counts, durations.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">boolean</td>
                <td class="px-4 py-2 text-gray-400">Toggle switch</td>
                <td class="px-4 py-2 text-gray-400">True/false flag.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">date</td>
                <td class="px-4 py-2 text-gray-400">Date picker</td>
                <td class="px-4 py-2 text-gray-400">Calendar date (YYYY-MM-DD).</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">datetime</td>
                <td class="px-4 py-2 text-gray-400">Date &amp; time picker</td>
                <td class="px-4 py-2 text-gray-400">Full timestamp (ISO 8601).</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">enum</td>
                <td class="px-4 py-2 text-gray-400">Segmented control / dropdown</td>
                <td class="px-4 py-2 text-gray-400">Pick from a predefined list of options.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">url</td>
                <td class="px-4 py-2 text-gray-400">URL input</td>
                <td class="px-4 py-2 text-gray-400">A web link. Opens in the browser on tap.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">checked</td>
                <td class="px-4 py-2 text-gray-400">Checkbox</td>
                <td class="px-4 py-2 text-gray-400">Completion checkbox shown in the list row. Supports swipe-to-check.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">priority</td>
                <td class="px-4 py-2 text-gray-400">Segmented control</td>
                <td class="px-4 py-2 text-gray-400">Five levels: none, low, medium, high, critical. Shown as a colored badge.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">recurrence</td>
                <td class="px-4 py-2 text-gray-400">Recurrence picker</td>
                <td class="px-4 py-2 text-gray-400">Repeat schedule &mdash; daily, weekly, monthly, yearly, or custom intervals. Automatically spawns the next item when checked off.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Field options -->
      <section>
        <h2 class="text-xl font-semibold text-white mb-4">Field options</h2>
        <p class="text-gray-400 mb-4">Each field in the schema supports these properties:</p>
        <div class="overflow-x-auto">
          <table class="w-full text-sm border border-gray-800 rounded-lg">
            <thead>
              <tr class="bg-gray-900 text-left text-gray-400">
                <th class="px-4 py-2 border-b border-gray-800">Property</th>
                <th class="px-4 py-2 border-b border-gray-800">Type</th>
                <th class="px-4 py-2 border-b border-gray-800">Description</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-800/50">
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">key</td>
                <td class="px-4 py-2 text-gray-400">string</td>
                <td class="px-4 py-2 text-gray-400">Machine name used as the key in item data. Must be unique.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">label</td>
                <td class="px-4 py-2 text-gray-400">string</td>
                <td class="px-4 py-2 text-gray-400">Display name shown in the UI.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">type</td>
                <td class="px-4 py-2 text-gray-400">string</td>
                <td class="px-4 py-2 text-gray-400">One of the field types listed above.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">required</td>
                <td class="px-4 py-2 text-gray-400">boolean</td>
                <td class="px-4 py-2 text-gray-400">If true, the field must have a value before saving.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">options</td>
                <td class="px-4 py-2 text-gray-400">string[]</td>
                <td class="px-4 py-2 text-gray-400">For <code class="text-gray-300">enum</code> fields only. The list of allowed values.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">listDisplay</td>
                <td class="px-4 py-2 text-gray-400">boolean</td>
                <td class="px-4 py-2 text-gray-400">If true, the field value is shown as secondary text in the list row.</td>
              </tr>
              <tr>
                <td class="px-4 py-2 font-mono text-gray-300">sortable</td>
                <td class="px-4 py-2 text-gray-400">boolean</td>
                <td class="px-4 py-2 text-gray-400">If true, the field appears as a sort option in the list header.</td>
              </tr>
            </tbody>
          </table>
        </div>
        <p class="text-gray-400 text-sm mt-4">
          The <code class="text-gray-300">primaryField</code> in the schema designates which field is used as the item title in list rows. It should reference the <code class="text-gray-300">key</code> of one of your fields.
        </p>
      </section>

      <!-- Example schema -->
      <section>
        <h2 class="text-xl font-semibold text-white mb-4">Example: expense tracker schema</h2>
        <p class="text-gray-400 mb-4">Here's the complete <code class="text-gray-300">metadata.json</code> for an expense tracking list:</p>
        <pre class="bg-gray-900 border border-gray-800 rounded-lg p-4 text-sm overflow-x-auto"><code class="text-gray-300">{schemaExample}</code></pre>
      </section>

      <!-- Templates -->
      <section>
        <h2 class="text-xl font-semibold text-white mb-4">Ready-made templates</h2>
        <p class="text-gray-400 mb-6">
          Fork any of these template repos to your own account, then clone your fork in GitSorted. Each one contains a <code class="text-gray-300">metadata.json</code> with a pre-built schema &mdash; just fork, add the repo URL in GitSorted, and start adding items.
        </p>
        <div class="grid sm:grid-cols-2 gap-4">
          {templates.map(t => (
            <a
              href={`${gh}/${t.repo}`}
              target="_blank"
              rel="noopener noreferrer"
              class="block bg-gray-900 border border-gray-800 rounded-lg p-4 hover:border-gray-600 transition-colors"
            >
              <h3 class="text-sm font-semibold text-white mb-1">{t.name}</h3>
              <p class="text-xs text-gray-400">{t.desc}</p>
              <p class="text-xs text-gray-500 mt-2 font-mono">{t.repo}</p>
            </a>
          ))}
        </div>
      </section>

      <!-- Creating your own -->
      <section>
        <h2 class="text-xl font-semibold text-white mb-4">Creating your own</h2>
        <p class="text-gray-400 mb-4">To build a custom list type from scratch:</p>
        <ol class="list-decimal list-inside space-y-3 text-gray-400">
          <li>Create a new git repo: <code class="text-gray-300">git init my-list && cd my-list</code></li>
          <li>Create a <code class="text-gray-300">metadata.json</code> with <code class="text-gray-300">projectType: "custom"</code> and your schema definition.</li>
          <li>Create an empty <code class="text-gray-300">items/</code> directory: <code class="text-gray-300">mkdir items && touch items/.gitkeep</code></li>
          <li>Commit and push to a remote: <code class="text-gray-300">git add -A && git commit -m "init" && git push -u origin main</code></li>
          <li>In GitSorted, clone the repo using its URL and your credential.</li>
        </ol>
        <p class="text-gray-400 text-sm mt-4">
          GitSorted reads the schema from <code class="text-gray-300">metadata.json</code> and dynamically builds the form, list view, sort options, and validation rules. No app update needed &mdash; just change the JSON.
        </p>
      </section>

    </div>
  </div>
</Base>
